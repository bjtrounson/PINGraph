!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js"),require("moment")):"function"==typeof define&&define.amd?define(["chart.js","moment"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).PINChart=e(t.Chart,t.moment)}(this,(function(t,e){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i,n=a(e);return function(t){t.Day="24h",t.Week="7d"}(i||(i={})),function(){function e(a,n){var r=document.createElement("canvas");r.setAttribute("id","pin-chart"),a.append(r),this.data=n,this.chartContainer=a,this.ctx=r.getContext("2d"),this.timeline=i.Week;var c={type:"line",data:{labels:e.createLabels(this.data,"7d"),datasets:[{fill:!0,spanGaps:!0,tension:.2,data:n.priceData,backgroundColor:function(t){var a=t.chart,i=a.ctx,n=a.chartArea;return n?e.getGradient(i,n):null}}]},options:{maintainAspectRatio:!1,borderColor:"#0a1992",elements:{point:{radius:0,hitRadius:4,hoverRadius:4}},plugins:{legend:{display:!1}},onResize:function(t,a){e.changeDisplayedLabels(t,a)},scales:{y:{ticks:{maxTicksLimit:4,align:"end"},grid:{display:!1,borderWidth:2}},x:{offset:!0,ticks:{autoSkip:!0,maxTicksLimit:7,maxRotation:0,minRotation:0,align:"start"},grid:{display:!1,borderWidth:0}}}}};this.chart=new t.Chart(this.ctx,c)}return e.prototype.getChart=function(){return this.chart},e.prototype.getContext=function(){return this.ctx},e.prototype.updateChart=function(t,a){null!==this.chart&&(this.chart.data.labels=e.createLabels(t,a),this.chart.data.datasets[0].data=t.priceData,this.chart.update())},e.changeTimeline=function(t,e){var a=Object.assign({},e.data);switch(t){case i.Day:a.priceData=a.priceData.slice(a.priceData.length-25,a.priceData.length),a.priceData.reverse(),e.chart.options.scales.x.ticks.maxTicksLimit=null,e.updateChart(a,t);break;case i.Week:e.chart.options.scales.x.ticks.maxTicksLimit=7,e.updateChart(a,t)}},e.buttonChangeActive=function(t,e){Object.keys(e.priceChangePercentage).forEach((function(t){var e=document.getElementById(t);e.classList.contains("active")&&e.classList.remove("active")})),document.getElementById(t).classList.add("active")},e.prototype.createTimelineButtons=function(t,a){var i=document.getElementById("priceContainer"),n=document.createElement("div");n.setAttribute("class","ml-auto btn-group m-0"),Object.keys(t.priceChangePercentage).forEach((function(i){var r=document.createElement("btn");r.setAttribute("id",i),r.setAttribute("class","btn btn-primary py-1"),r.addEventListener("click",(function(){e.changeTimeline(i,a),e.buttonChangeActive(i,t)})),r.innerHTML=i,n.appendChild(r)})),i.appendChild(n)},e.prototype.createTitleBar=function(t){var e=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("h3"),c=document.createElement("h5"),s=document.createElement("p"),o=document.createElement("p");a.setAttribute("id","priceContainer"),e.setAttribute("class","container-auto"),a.setAttribute("class","d-flex align-items-end"),i.setAttribute("id","timeDetailsContainer"),i.setAttribute("class","d-flex"),c.innerHTML="PIN/USD",c.setAttribute("class","mr-1 mb-1"),r.setAttribute("id","priceTitle"),r.innerHTML="".concat(t.currentPrice),r.setAttribute("class","mb-0 mr-1"),s.setAttribute("class","mb-1"),s.innerHTML="(".concat(parseFloat("".concat(t.priceChangePercentage["7d"])).toFixed(2),"%)"),o.innerHTML="".concat(n.default(t.lastUpdated).utc(!0).format("LLLL z")),a.append(r,c,s),i.append(o),e.append(a,i),this.chartContainer.prepend(e)},e.getGradient=function(t,e){var a=t.createLinearGradient(0,e.bottom,0,e.top);return a.addColorStop(0,"rgb(10, 25, 146, 1)"),a.addColorStop(1,"rgb(255, 255, 255, 0)"),a},e.createLabels=function(t,e){var a=[],r=t.priceData.length;switch(e){case i.Day:a=[n.default(new Date(t.lastUpdated)).format("Do h:mm:ss a")];for(var c=0;c<r;c++)a.push(n.default().subtract(c,"hours").format("Do h:mm:ss a"));break;case i.Week:a=[n.default(new Date(t.lastUpdated)).format("MMM D")];for(c=0;c<r;c++)a.push(n.default().subtract(c,"hours").format("MMM D"))}return a.reverse()},e.changeDisplayedLabels=function(t,e){e.width<545?(e.width,t.options.scales.y.ticks.display=!1,t.options.scales.x.ticks.display=!1):(t.options.scales.y.ticks.display=!0,t.options.scales.x.ticks.display=!0)},e}()}));
//# sourceMappingURL=pin-chart.min.js.map
